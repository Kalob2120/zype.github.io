<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Russian Doll Caching in Rails 4</title>
    <meta name="description" content="This is the devloper portal for Zype Media. Zype is Revenue and Reach Magic for Online Video. We help content owners deliver fully branded video experiences.
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://dev.zype.com/posts/2014/10/24/russian-doll-caching">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>


  <body>

    <header>
  <h1 id="title">Zype Dev Portal</h1>
  <p>a knowledge base</p>
  <br>
  <p class="category"><a href="/blog/">Blog</a></p>
  <br>
  <p class="category">API Documentation</p>
  <p><a href="/">Introduction</a></p>
  <p><a href="/api_docs/videos/">Videos</a></p>
  <p><a href="/api_docs/playlists/">Playlists</a></p>
  <p><a href="/api_docs/categories/">Categories</a></p>
  <p><a href="/api_docs/device_categories/">Device Categories</a></p>
  <p><a href="/api_docs/devices/">Devices</a></p>
  <p><a href="/api_docs/revenue_models/">Revenue Models</a></p>
  <p><a href="/api_docs/zobject_types/">Zobject Types</a></p>
  <p><a href="/api_docs/zobjects/">Zobjects</a></p>
  <p><a href="/api_docs/geoip/">GeoIP</a></p>
</header>


    <section id="main">
      <div class="post">
  <h1 class="post-title">Russian Doll Caching in Rails 4</h1>
  <p class="post-meta">Oct 24, 2014</p>
  <article class="post-content">
    <p>While developing, we always keep the user experience in mind and one of the most important things for a content heavy application
is load times. In rails, this usually comes down to how quickly you can render the requested view. Today I want to take a quick look
at how to nest caching statements in rails 4 for maximum effectiveness.</p>

<h3 id="what-is-russian-doll-caching">What is Russian doll caching?</h3>

<p>Russian-doll caching is a convention used in Rails 4 to improve the load time of your views. It involves using nested fragment caching statements so that only the page content that has changed since the last request needs to be regenerated. All the other elements of the page are simply read from their still-valid caches.</p>

<p>Here’s an example of some nested fragment caching statements in a view for a gallery of videos:</p>

<p><img src="http://i.imgur.com/cCQLi4g.png" alt="nested cache statements" /></p>

<p>Each level of nesting ensures that you only pay to read the caches of the content nested above it, not regenerate it, when the content nested below it changes. This has a reverse cascading effect, so the more strategic you can be with your caching statements, the less time you’ll spend trying to re-render the page.</p>

<h3 id="where-should-i-start-adding-russian-doll-caching">Where should I start adding Russian doll caching?</h3>

<p>The parts of your app that are viewed most often will likely be your best targets for russian doll caching. Anywhere that you’re displaying a mix of dynamic and static content is also a good target because you can eliminate the need to reload the entire page when only a portion of the content has changed.</p>

<p>Take a look at your views and see if you can compartmentalize them based on content, this will be easier if you’re already using partials in the same way.</p>

<p>Here’s a visual example of the nested nature of the caching statements from the code above:</p>

<p><img src="http://i.imgur.com/8PxC8mg.png" alt="seeing the nests in your view" /></p>

<h3 id="further-reading">Further reading</h3>

<p>You can read up about cache expiration and best practices from DHH himself:</p>

<p><a href="https://signalvnoise.com/posts/3112-how-basecamp-next-got-to-be-so-damn-fast-without-using-much-client-side-ui">Here </a>  <a href="https://signalvnoise.com/posts/3113-how-key-based-cache-expiration-works">- and here.</a></p>

  </article>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'zypedev'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

    </section>

    <footer>
  © 2014 Zype Media Group
</footer>


  </body>

</html>
